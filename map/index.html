<!DOCTYPE html>
<html>
<head>
  <title>Interactive Accent Map</title>
  <meta name="viewport" content="width=600, user-scalable=no">
  <link rel="stylesheet" href="jquery-jvectormap-1.2.2.css" type="text/css" media="screen"/>
  <link rel="stylesheet" href="style.css" type="text/css"/>
  <script src="jquery-1.11.1.min.js"></script>
  <script src="jquery-jvectormap-1.2.2.min.js"></script>
  <script src="jquery-jvectormap-world-mill-en.js"></script>
</head>
<body>

    <div id="world-map">
        <div id="container">
        <audio id="audio-player" src="" controls="controls" preload="auto">
        </audio>
    </div>
    </div>


    <script>
        var songnames = [
            "spanish22",
            "portuguese8",
            "english144",
            "wolof2",
            "indonesian3",
            "hindi1",
            "mandarin2",
            "spanish3",
            "bengali2",
            "spanish21",
            "english117",
            "yupik1",
            "english138",
            "mandarin7"
        ];

        var agesex = [
            "Female, 32",
            "Male, 26",
            "Male, 24",
            "Male, 37",
            "Female, 32",
            "Male, 27",
            "Female, 38",
            "Female, 17",
            "Female, 25",
            "Male, 25",
            "Female, 60",
            "Female, 31",
            "Female, 25",
            "Male, 22"
        ]

        var residence = [
            "USA, 0.8 ",
            "UK, 8.5",
            "Canada, 24",
            "USA, 8",
            "USA, 0.6",
            "UK/USA, 3.5",
            "USA, 0.8",
            "USA, 0.1",
            "USA, 21",
            "0",
            "USA, 60",
            "Alaska, 31",
            "USA, 25",
            "USA, 22",
        ]

        var nativelang = [
            "Spanish",
            "Portugese",
            "English",
            "Wolof",
            "Indonesian",
            "Hindi",
            "Mandarin",
            "Spanish",
            "Bengali",
            "Spanish",
            "English",
            "Yupik",
            "English",
            "Mandarin"
        ]

        var method = [
            "Academic, 11",
            "Academic, 7",
            "Naturalistic, 0",
            "Academic, 11",
            "Academic, 13",
            "Academic, 2",
            "Academic, 14",
            "Academic, 16",
            "Naturalistic, 2",
            "Naturalistic, 18",
            "Naturalistic, 0",
            "Naturalistic, 1",
            "Naturalistic, 0",
            "Naturalistic, 5"
        ]

        var r;
        if($('#world-map' ).width() > 500) {
            r = 5;
        }
        else {
            r = 8;
        }


        $(function(){
            var currentsong = -1;
            $('#world-map').vectorMap({
                map: 'world_mill_en',
                scaleColors: ['#C8EEFF', '#0071A4'],
                normalizeFunction: 'polynomial',
                hoverOpacity: 0.7,
                hoverColor: false,
                markerStyle: {
                    initial: {
                        fill: '#F8E23B',
                        stroke: '#383f47',
                        r: r
                    }
                },
                backgroundColor: '#383f47',
                markers: [
                    {latLng: [40.426565, -3.703873], name: 'Madrid'},
                    {latLng: [-3.728597, -38.527787], name: 'Fortaleza'},
                    {latLng: [45.593056, -62.267222], name: 'Barneys River, Nova Scotia'},
                    {latLng: [14.692778, -17.446667], name: 'Dakar'},
                    {latLng: [-6.2, 106.8], name: 'Jakarta'},
                    {latLng: [21.15, 79.09], name: 'Nagpur, Maharashtra'},
                    {latLng: [32.05, 118.766667], name: 'Nanjing'},
                    {latLng: [4.598056, -74.075833], name: 'Bogota'},
                    {latLng: [-15.416667, 28.283333], name: 'Lusaka'},
                    {latLng: [-33.45, -70.666667], name: 'Santiago'},
                    {latLng: [32.542314, -86.315455], name: 'Elmore, Alabama'},
                    {latLng: [60.792222, -161.755833], name: 'Bethel, Alaska'},
                    {latLng: [61.601944, -149.117222], name: 'Palmer, Alaska'},
                    {latLng: [37.871667, -122.272778], name: 'Berkeley, California'}
                ],
                onMarkerLabelShow: function(event, label, index){
                    label.html('<b>Birthplace: </b>' +  label.html() + '<br /><b>Speaker: </b>' + agesex[index] + '<br /><b>Native Language: </b>' + nativelang[index] + '<br /><b>Method/Age: </b>' + method[index] + '<br /><b>English Residence: </b>' + residence[index] + " years");
                },
                onMarkerClick: function(event, index){
                    var lol = parseInt(index,10);
                    if(currentsong==lol){
                        var audio = document.getElementById('audio-player');
                        if(audio.paused){
                            audio.play();
                        }
                        else {
                            audio.pause();
                        }
                    }
                    else {
                        $("#container").html("<audio id='audio-player' src='" + songnames[lol] + ".mp3' controls='controls' preload='auto'>");
                        var audio = document.getElementById('audio-player');
                        audio.play();
                        currentsong = lol;
                        $('#audio-player').css('margin-left', $(document).width()/2 - $('#audio-player').width() -20);
                    }
                }
            });
        });
        $('#world-map').css('height', $( document ).height() - 40);
        $('#world-map').css('width', $(document).width() - 40);
        $('#audio-player').css('margin-left', $(document).width()/2 - $('#audio-player').width() -20);
        $(window).resize(function () {
            $('#world-map').css('height', $( document ).height() - 40);
            $('#world-map').css('width', $(document).width() - 40);
            $('#audio-player').css('margin-left', $(document).width()/2 - $('#audio-player').width() -20);
        });

    </script>
</body>
</html>
